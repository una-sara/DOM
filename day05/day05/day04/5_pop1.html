<!doctype html>
<html>
 <head>
	<meta charset="UTF-8">
	<title>在当前显示区范围内实现点不到的小方块</title>
	<style>
		div{position:fixed;width:100px;height:100px;
			background-image:url(images/xiaoxin.gif);
      background-size:100%;
		}
	</style>
	
 </head>
 <body>
	<div id="pop"></div>
<script>
var canMove=false;//开关
var offsetX,offsetY;//保存移动过程中鼠标相对于div左上角的固定不变的偏移量
//当在pop上按下鼠标时
pop.onmousedown=function(e){
	canMove=true;//打开开关
	//开始拖拽时，就获得鼠标相对于div左上角的偏移量，用于之后移动过程中top、left的计算
	offsetX=e.offsetX;
	offsetY=e.offsetY;
}
//在窗口范围内移动鼠标
window.onmousemove=function(e){
	if(canMove){//如果打开了开关
		//pop才跟随鼠标移动
		//先获得鼠标相对于文档显示区左上角的当前位置
		var x=e.clientX,y=e.clientY;
		//根据鼠标当前位置，计算出pop左上角的新位置：鼠标相对于文档显示区边框的距离-鼠标相对于div左上角的偏移量
		var top=y-offsetY;
		var left=x-offsetX;
		//将pop移动到新位置上
		pop.style.top=top+"px";
		pop.style.left=left+"px";
	}
}
//当在pop上抬起按键时
pop.onmouseup=function(){
	canMove=false;//关闭开关
}
</script>
 </body>
</html>
