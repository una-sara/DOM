<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>全选和取消全选</title>
</head>
<body>
	<h2>管理员列表</h2>
	<table border="1px" width="500px">
	  <thead>
		<tr>
			<th><input type="checkbox"/>全选</th>
			<th>管理员ID</th>
			<th>姓名</th>
			<th>操作</th>
		</tr>
	  </thead>
	  <tbody>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>1</td>
	  		<td>Tester</td>
	  		<td>修改 删除</td>
	  	</tr>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>2</td>
	  		<td>Manager</td>
	  		<td>修改 删除</td>
	  	</tr>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>3</td>
	  		<td>Analyst</td>
	  		<td>修改 删除</td>
	  	</tr>
	  	<tr>
	  		<td><input type="checkbox"/></td>
	  		<td>4</td>
	  		<td>Admin</td>
	  		<td>修改 删除</td>
	  	</tr>
	  </tbody>
	</table>
	<button>删除选定</button>
<script>
//1. 查找触发事件的元素
//查找table下thead中tr下th中的input
var chbAll=document.querySelector(
	"table>thead>tr>th>input");
//2. 绑定事件处理函数
chbAll.onclick=function(){
	var chbAll=this;
	//3. 查找要修改的元素
	//查找table下tbody中tr下td中的input
	var chbs=document.querySelectorAll(
		"table>tbody>tr>td>input");
	//4. 修改元素
	for(var chb of chbs){//遍历tbody中每个chb
		//修改当前正在遍历的chb的checked和chbAll的checked保持一致
		chb.checked=chbAll.checked;
	}
}

//1. 查找触发事件的元素
//查找table下tbody中tr下td中的input
var chbs=document.querySelectorAll(
		"table>tbody>tr>td>input");
//2. 绑定事件处理函数
for(var chb of chbs){//遍历每行的chb
	chb.onclick=function(){
		var chb=this;
		//3. 查找要修改的元素
		//查找thead中tr下th中的全选input
		var chbAll=document.querySelector(
			"table>thead>tr>th>input");
		//4. 修改元素
		//如果当前点击的chb取消选中，则一定不全选
		if(chb.checked==false){
			chbAll.checked=false;
		}else{
			//尝试找tbody中未选中的一个chb
			var unchecked=document.querySelector(
				"table>tbody>tr>td>input:not(:checked)"
			);
			//如果没找到未选中的，说明全选中了
			if(unchecked==null)
			  chbAll.checked=true;//chbAll才可选中
		}
	}
}
</script>
</body>
</html>
